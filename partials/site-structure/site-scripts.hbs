<script src="{{asset " built/main.min.js"}}" defer></script>
<script>
  // Dark/Light Mode

  var darkLight = document.querySelector('.it-dark-light')
  darkLight.addEventListener('click', function () {
    if (document.querySelector('html').getAttribute('data-theme') === 'dark') {
      document.querySelector('html').setAttribute('data-theme', 'light')
      localStorage.setItem('selected-theme', 'light');
    } else {
      document.querySelector('html').setAttribute('data-theme', 'dark')
      localStorage.setItem('selected-theme', 'dark');
    }
    console.log(document.querySelector('html').hasAttribute('data-theme'))
  });

  /**
 * Boilerplate Functions
 */
  function posf(f, a) { for (var i = 0; i < a.length; i++) { if (f(a[i])) return i; } return -1; }
  function apos(x, a) { return (typeof x == 'function') ? posf(x, a) : Array.prototype.indexOf.call(a, x) }
  function arem(a, x) { var i = apos(x, a); if (i >= 0) { a.splice(i, 1); } return a; }
  function afind(x, a) { var i = apos(x, a); return (i >= 0) ? a[i] : null; }
  function addClass(el, cl) { if (el) { var a = el.className.split(' '); if (!afind(cl, a)) { a.unshift(cl); el.className = a.join(' ') } } }
  function remClass(el, cl) { if (el) { var a = el.className.split(' '); arem(a, cl); el.className = a.join(' ') } }


  /**
   * Setup Variables
   */
  var previousPosition = window.pageYOffset;
  var navbar = document.getElementById("gh-burger");
  var navbarHeight = navbar.offsetHeight;

  if (previousPosition > navbarHeight) {
    addClass(navbar, 'headroom');
  }

  var navbar2 = document.getElementById("gh-head");
  var navbar2Height = navbar2.offsetHeight;

  if (previousPosition > navbar2Height) {
    addClass(navbar2, 'headroom');
  }


  /**
   * Headroom Action
   */
  window.onscroll = function () {

    var currentPosition = window.pageYOffset;

    addClass(navbar, 'headroom');
    addClass(navbar2, 'headroom');
  };
</script>
{{#is "post"}}
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toc = document.querySelector('.toc');
    const sidebarToc = document.getElementById('sidebar-toc');
    const headings = document.querySelectorAll('.gh-content.gh-canvas h1, .gh-content.gh-canvas h2');

    // Hide sidebar if fewer than 3 headings
    if (headings.length < 3) {
      if (sidebarToc) sidebarToc.style.display = 'none';
      return;
    }

    // Initialize tocbot if headings exist
    if (toc && headings.length > 0) {
      tocbot.init({
        tocSelector: '.toc',
        contentSelector: '.gh-content.gh-canvas',
        headingSelector: 'h1,h2',
        hasInnerContainers: true,
        scrollSmooth: true,
        scrollSmoothDuration: 420,
        headingsOffset: 40,
        scrollSmoothOffset: -40
      });
      if (sidebarToc) sidebarToc.style.display = 'flow-root';
    }
  });
</script>

{{/is}}

<script type="text/javascript">
  /* External links opens in new window */
  document.addEventListener("DOMContentLoaded", function () {
    var articleElement = document.getElementsByTagName("article")[0];
    if (articleElement) {
      var links = articleElement.querySelectorAll('a');
      var a = new RegExp('/' + window.location.host + '/');
      links.forEach((link) => {
        if (!a.test(link.href)) {
          link.setAttribute("target", "_blank");
        }
      });
    }
  });
</script>

<script src="{{asset " js/flying-pages.min.js"}}"></script>
<script type="module">
  import Typebot from 'https://cdn.jsdelivr.net/gh/somos-criptonautas/js/typebot-web.js'

  Typebot.initBubble({
    typebot: "hello-anon",
    apiHost: "https://bot.criptonautas.co",
    theme: {
      button: {
        backgroundColor: "#111",
        customIconSrc:
          "https://cdn-blog.criptonautas.co/content/images/2024/07/notsato.png",
        size: "large",
      },
      chatWindow: { backgroundColor: "#fff" },
    },
  });
</script>
<script>
  window.__MP_SEARCH_CONFIG__ = {
    typesenseNodes: [{
      host: 'typesense.criptonautas.co',
      port: '443',
      protocol: 'https'
    }], // also supports a Typesense cluster
    typesenseApiKey: '8hPtZRIeBeU4MM7c6Fy9viwynvG1F2F4', // Under no circumstances use an admin API key here. These values are stored client-side and are therefore accessible to the end user.
    collectionName: 'ghost',
    theme: 'system', // 'light', 'dark', or 'system'
    enableHighlighting: true, // highlight search terms in results
    commonSearches: ['cómo empezar', 'diseño humano', 'plantas del amazonas'] // can also be empty
  };
</script>
<script defer async data-domain="criptonautas.co"
  src="https://stats.criptonautas.co/js/plausible.outbound-links.js"></script>
<script>window.plausible = window.plausible || function () { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>